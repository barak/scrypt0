From: "Barak A. Pearlmutter" <barak+git@cs.nuim.ie>
Date: Mon, 9 Mar 2015 15:32:45 +0000
Subject: configure.ac libcrypto

Search for -lcrypto in configure.ac instead of hardwiring it in
Makefile.am, and test that it provides AES_encrypt().
---
 configure.ac | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/configure.ac b/configure.ac
index 480a131..2c88538 100644
--- a/configure.ac
+++ b/configure.ac
@@ -10,6 +10,9 @@ AC_PROG_RANLIB
 AC_SEARCH_LIBS([clock_gettime], [rt])
 AC_CHECK_FUNCS([clock_gettime])
 
+AC_SEARCH_LIBS([AES_encrypt], [crypto],,
+    AC_MSG_ERROR([function AES_ENCRYPT not found]))
+
 # Check for a linuxy sysinfo syscall; and while we're doing that, check if
 # struct sysinfo is the old version (total RAM == totalmem) or the new
 # version (total RAM == totalmem * mem_unit).
